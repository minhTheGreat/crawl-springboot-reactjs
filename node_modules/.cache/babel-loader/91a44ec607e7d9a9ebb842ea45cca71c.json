{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport * as types from '../Config/authConstant';\nimport API from '../utils/api';\nimport history from '../Config/history';\nexport var getUser = function getUser() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = JSON.parse(localStorage.getItem('authentication'));\n                dispatch({\n                  type: types.GET_USER,\n                  payload: user\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar loginRequest = function loginRequest(userId, token) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                try {\n                  {\n                    /*const response = await API.get(`/users/:${userId}`, {\r\n                       params: {\r\n                           access_token: token,\r\n                       },\r\n                    })\r\n                    localStorage.setItem(\r\n                       'authentication',\r\n                       JSON.stringify({ id: response.data.id, name: response.data.username }),\r\n                    )\r\n                    dispatch({type:types.GETALL_SUCCESS})*/\n                  }\n                  history.push('/home');\n                } catch (err) {\n                  if (err.response.status === 400) {\n                    window.location.reload();\n                  }\n\n                  dispatch({\n                    type: types.GETALL_FAILURE,\n                    payload: err.message\n                  });\n                }\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nexport var login = function login(username, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        var _ref4, data;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return API.post('/users', {\n                  username: username,\n                  password: password\n                });\n\n              case 3:\n                _ref4 = _context3.sent;\n                data = _ref4.data;\n                localStorage.setItem('token', data.id);\n                dispatch({\n                  type: types.LOGIN_SUCCESS,\n                  payload: data\n                });\n                dispatch(loginRequest(data.userId, data.id));\n                _context3.next = 13;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](0);\n                dispatch({\n                  type: types.LOGIN_FAILURE,\n                  payload: _context3.t0.message\n                });\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 10]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var register = function register(username, email, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return API.post('Users', {\n                  username: username,\n                  email: email,\n                  password: password\n                });\n\n              case 3:\n                dispatch({\n                  type: types.REGISTER_SUCCESS\n                });\n                history.push('/login', {\n                  register: 'success'\n                });\n                _context4.next = 10;\n                break;\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                dispatch({\n                  type: types.REGISTER_FAILURE,\n                  payload: _context4.t0.message\n                });\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }));\n\n      return function (_x4) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var logout = function logout() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref6 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                try {\n                  localStorage.removeItem('authentication');\n                  localStorage.removeItem('token');\n                  dispatch({\n                    type: types.LOGOUT\n                  });\n                  history.push('/login');\n                } catch (err) {\n                  if (err.response.status === 401) {\n                    history.push('/login');\n                  }\n\n                  console.log(err);\n                }\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x5) {\n        return _ref6.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var getAllUser = function getAllUser() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref7 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(dispatch) {\n        var _ref8, data;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return API.get('/users');\n\n              case 3:\n                _ref8 = _context6.sent;\n                data = _ref8.data;\n                dispatch({\n                  type: types.GETALL_SUCCESS,\n                  payload: data\n                });\n                _context6.next = 11;\n                break;\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.log(_context6.t0);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 8]]);\n      }));\n\n      return function (_x6) {\n        return _ref7.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var createUser = function createUser(username, email, mobile, role, note, avatar, address, skill, experiences) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(dispatch) {\n        var _ref10, data;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return API.post('/users', {\n                  username: username,\n                  email: email,\n                  mobile: mobile,\n                  role: role,\n                  note: note,\n                  avatar: avatar,\n                  address: address,\n                  skill: skill,\n                  experiences: experiences\n                });\n\n              case 3:\n                _ref10 = _context7.sent;\n                data = _ref10.data;\n                dispatch({\n                  type: types.CREATE_SUCCESS\n                });\n                history.push(\"/home\");\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](0);\n                console.log(_context7.t0);\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 9]]);\n      }));\n\n      return function (_x7) {\n        return _ref9.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["F:\\NoteJS\\final\\src\\actions\\userActions.js"],"names":["types","API","history","getUser","dispatch","user","JSON","parse","localStorage","getItem","type","GET_USER","payload","loginRequest","userId","token","push","err","response","status","window","location","reload","GETALL_FAILURE","message","login","username","password","post","data","setItem","id","LOGIN_SUCCESS","LOGIN_FAILURE","register","email","REGISTER_SUCCESS","REGISTER_FAILURE","logout","removeItem","LOGOUT","console","log","getAllUser","get","GETALL_SUCCESS","createUser","mobile","role","note","avatar","address","skill","experiences","CREATE_SUCCESS"],"mappings":"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","sourcesContent":["import * as types from '../Config/authConstant';\r\nimport API from '../utils/api';\r\nimport history from '../Config/history';\r\n\r\nexport const getUser = () => async (dispatch) => {\r\n    const user = JSON.parse(localStorage.getItem('authentication'));\r\n    dispatch({ type: types.GET_USER, payload: user })\r\n\r\n}\r\nconst loginRequest = (userId, token) => async (dispatch) => {\r\n    try {\r\n        {/*const response = await API.get(`/users/:${userId}`, {\r\n            params: {\r\n                access_token: token,\r\n            },\r\n        })\r\n        localStorage.setItem(\r\n            'authentication',\r\n            JSON.stringify({ id: response.data.id, name: response.data.username }),\r\n        )\r\n        dispatch({type:types.GETALL_SUCCESS})*/}\r\n        history.push('/home')\r\n    }\r\n    catch (err) {\r\n        if(err.response.status===400){\r\n            window.location.reload()\r\n        }\r\n        dispatch({type:types.GETALL_FAILURE,payload:err.message})\r\n    }\r\n}\r\nexport const login = (username,password)=> async (dispatch)=>{\r\n    try{\r\n        const {data} = await API.post('/users', {username,password})\r\n        localStorage.setItem('token',data.id)\r\n        dispatch({type:types.LOGIN_SUCCESS,payload:data})\r\n        dispatch(loginRequest(data.userId,data.id))\r\n    }catch(err){\r\n        dispatch({type:types.LOGIN_FAILURE,payload:err.message})\r\n    }\r\n\r\n}\r\nexport const register = (username,email,password) => async (dispatch) => {\r\n    try {\r\n      await API.post('Users', {  username,email, password })\r\n      dispatch({ type: types.REGISTER_SUCCESS })\r\n      history.push('/login', { register: 'success' })\r\n    } catch (err) {\r\n      dispatch({ type: types.REGISTER_FAILURE, payload: err.message })\r\n    }\r\n  }\r\n  \r\n  export const logout = () => async (dispatch) => {\r\n    try {\r\n      localStorage.removeItem('authentication')\r\n      localStorage.removeItem('token')\r\n      dispatch({ type: types.LOGOUT })\r\n      history.push('/login')\r\n    } catch (err) {\r\n      if (err.response.status === 401) {\r\n        history.push('/login')\r\n      }\r\n      console.log(err)\r\n    }\r\n  }\r\n  export const getAllUser =()=> async (dispatch)=>{\r\n    try{\r\n      const {data} = await API.get('/users')\r\n      dispatch({type:types.GETALL_SUCCESS,payload:data})\r\n\r\n    }\r\n    catch(err){\r\n      console.log(err)\r\n    }\r\n  }\r\n  export const createUser =(\r\n    username,\r\n    email,\r\n    mobile,\r\n    role,\r\n    note,\r\n    avatar,\r\n    address,\r\n    skill,\r\n    experiences\r\n    )=> async dispatch =>{\r\n    try{\r\n      const {data} = await API.post('/users',{\r\n        username,\r\n        email,\r\n        mobile,\r\n        role,\r\n        note,\r\n        avatar,\r\n        address,\r\n        skill,\r\n        experiences\r\n      })\r\n      dispatch({type:types.CREATE_SUCCESS})\r\n      history.push(\"/home\")\r\n    }\r\n    catch(err){\r\n      console.log(err)\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}