{"ast":null,"code":"import _defineProperty from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\NoteJS\\\\final\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\NoteJS\\\\final\\\\src\\\\views\\\\Manager\\\\create\\\\CreateNew.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { saveCategoryRequest } from './../../../actions/categoryAction';\nimport { addNewsRequest } from './../../../actions/newsAction';\nimport callAPI from './../../../utils/CallAPI';\nexport var createNew =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(createNew, _Component);\n\n  function createNew(props) {\n    var _this;\n\n    _classCallCheck(this, createNew);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(createNew).call(this, props));\n\n    _this.onChange = function (e) {\n      var target = e.target;\n      var name = target.name;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n\n      if (name === 'categoryId') {\n        console.log(value);\n      }\n\n      _this.setState(_defineProperty({}, name, value));\n\n      console.log(_this.state);\n    };\n\n    _this.onSubmit = function (event) {\n      event.preventDefault();\n      console.log(_this.state);\n      var _this$state = _this.state,\n          id = _this$state.id,\n          categoryId = _this$state.categoryId,\n          userId = _this$state.userId,\n          newsAvatar = _this$state.newsAvatar,\n          newsTitle = _this$state.newsTitle,\n          newsPostDay = _this$state.newsPostDay,\n          newsContent = _this$state.newsContent;\n\n      if (id) {\n        var newupdate = {\n          id: {\n            tblCategoriesId: categoryId\n          },\n          tblCategory: {\n            categoryId: categoryId\n          },\n          tblUser: {\n            userId: 1\n          },\n          newsAvatar: newsAvatar,\n          newsTitle: newsTitle,\n          newsPostDay: newsPostDay,\n          newsContent: newsContent\n        };\n        callAPI(\"new/\".concat(id), 'PUT', newupdate).then(function (reps) {\n          if (reps.status === 201) {\n            alert('Them thanh cong');\n          }\n\n          var history = _this.props.history;\n          setTimeout(function () {\n            history.push(\"/manager/news\");\n          }, 2000);\n        });\n      } else {\n        var news = {\n          id: {\n            tblCategoriesId: categoryId\n          },\n          tblCategory: {\n            categoryId: categoryId\n          },\n          tblUser: {\n            userId: 1\n          },\n          newsAvatar: newsAvatar,\n          newsTitle: newsTitle,\n          newsPostDay: newsPostDay,\n          newsContent: newsContent\n        };\n\n        _this.props.addNews(news);\n\n        var history = _this.props.history;\n        setTimeout(function () {\n          history.push(\"/manager/news\");\n        }, 2000);\n      }\n    };\n\n    _this.onClear = function () {\n      _this.setState({\n        id: '',\n        categoryId: null,\n        userId: \"\",\n        newsAvatar: \"\",\n        newsTitle: '',\n        newsPostDay: '',\n        newsContent: '',\n        slt: 0\n      });\n    };\n\n    _this.state = {\n      id: '',\n      categoryId: 0,\n      userEmail: \"\",\n      newsAvatar: \"\",\n      newsTitle: '',\n      newsPostDay: '',\n      newsContent: ''\n    };\n    return _this;\n  }\n\n  _createClass(createNew, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.getCategory();\n      var match = this.props.match;\n      console.log(match);\n\n      if (match) {\n        var id = match.params.id;\n        console.log(id);\n        callAPI(\"new/\".concat(id), 'GET', null).then(function (reps) {\n          var data = reps.data;\n          console.log(data);\n\n          _this2.setState({\n            id: data.id.newsId,\n            newsAvatar: data.newsAvatar,\n            newsPostDay: data.newsPostDay,\n            newsContent: data.newsContent,\n            categoryId: data.id.tblCategoriesId,\n            newsTitle: data.newsContent,\n            userEmail: data.tblUser.userEmail\n          });\n\n          console.log(_this2.state);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var category = this.props.category; //console.log(category)\n\n      var elem = category.map(function (n, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: n.categoryId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, n.categoryTitle);\n      });\n      var _this$state2 = this.state,\n          userEmail = _this$state2.userEmail,\n          categoryId = _this$state2.categoryId,\n          newsAvatar = _this$state2.newsAvatar,\n          newsPostDay = _this$state2.newsPostDay,\n          newsContent = _this$state2.newsContent,\n          newsTitle = _this$state2.newsTitle,\n          slt = _this$state2.slt;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"S\\u1EEDa tin t\\u1EE9c\")), React.createElement(\"div\", {\n        className: \"card-body card-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        className: \"form-horizontal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"text-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Ti\\xEAu \\u0111\\u1EC1 b\\xE0i vi\\u1EBFt\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"newsTitle\",\n        placeholder: \"T\\xEAn ti\\xEAu \\u0111\\u1EC1\",\n        className: \"form-control\",\n        onChange: this.onChange,\n        value: newsTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"text-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Chuy\\xEAn m\\u1EE5c\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        name: \"categoryId\",\n        className: \"form-control\",\n        onChange: this.onChange,\n        value: categoryId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, elem))), React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"File \\u1EA3nh\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        id: \"file-input\",\n        name: \"newsAvatar\",\n        className: \"form-control-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"N\\u1ED9i dung\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"ckeditor\",\n        name: \"newsContent\",\n        onChange: this.onChange,\n        value: newsContent,\n        rows: \"5\",\n        cols: \"70\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })))))), React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Ng\\u01B0\\u1EDDi \\u0111\\u0103ng\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"userId\",\n        placeholder: \" ng\\u01B0\\u1EDDi t\\u1EA1o\",\n        className: \"form-control\",\n        onChange: this.onChange,\n        value: userEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-input\",\n        className: \" form-control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Ng\\xE0y t\\u1EA1o\")), React.createElement(\"div\", {\n        className: \"col-12 col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"date\",\n        name: \"newsPostDay\",\n        className: \"form-control\",\n        onChange: this.onChange,\n        value: newsPostDay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary btn-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-dot-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), \" Luu\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger btn-sm\",\n        onClick: this.onClear,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-ban\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), \" Reset\"))))))));\n    }\n  }]);\n\n  return createNew;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    category: state.Category\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispath, props) {\n  return {\n    getCategory: function getCategory() {\n      dispath(saveCategoryRequest());\n    },\n    addNews: function addNews(news) {\n      dispath(addNewsRequest(news));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(createNew);","map":{"version":3,"sources":["F:\\NoteJS\\final\\src\\views\\Manager\\create\\CreateNew.js"],"names":["React","Component","connect","saveCategoryRequest","addNewsRequest","callAPI","createNew","props","onChange","e","target","name","value","type","checked","console","log","setState","state","onSubmit","event","preventDefault","id","categoryId","userId","newsAvatar","newsTitle","newsPostDay","newsContent","newupdate","tblCategoriesId","tblCategory","tblUser","then","reps","status","alert","history","setTimeout","push","news","addNews","onClear","slt","userEmail","getCategory","match","params","data","newsId","category","elem","map","n","index","categoryTitle","mapStateToProps","Category","mapDispatchToProps","dispath"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { saveCategoryRequest } from './../../../actions/categoryAction'\r\nimport { addNewsRequest } from './../../../actions/newsAction'\r\nimport callAPI from './../../../utils/CallAPI'\r\nexport class createNew extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      id: '',\r\n      categoryId: 0,\r\n      userEmail: \"\",\r\n      newsAvatar: \"\",\r\n      newsTitle: '',\r\n      newsPostDay: '',\r\n      newsContent:'',\r\n      \r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.getCategory();\r\n    var { match } = this.props;\r\n    console.log(match)\r\n    if (match) {\r\n      var id = match.params.id;\r\n      console.log(id)\r\n      callAPI(`new/${id}`, 'GET', null).then(reps => {\r\n        var data = reps.data;\r\n        console.log(data)\r\n        this.setState({\r\n          id: data.id.newsId,\r\n          newsAvatar: data.newsAvatar,\r\n          newsPostDay: data.newsPostDay,\r\n          newsContent: data.newsContent,\r\n          categoryId: data.id.tblCategoriesId,\r\n          newsTitle: data.newsContent,\r\n          userEmail:data.tblUser.userEmail\r\n\r\n        });\r\n        console.log(this.state)\r\n\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n  onChange = (e) => {\r\n    var target = e.target;\r\n    var name = target.name;\r\n   \r\n    var value = target.type === 'checkbox' ? target.checked : target.value;\r\n    if(name==='categoryId')\r\n    {\r\n      console.log(value)\r\n    }\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n    console.log(this.state)\r\n\r\n  }\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n    console.log(this.state);\r\n    var { id, categoryId, userId, newsAvatar, newsTitle, newsPostDay, newsContent } = this.state;\r\n    if (id) {\r\n      var newupdate = {\r\n        id: {\r\n\r\n          tblCategoriesId: categoryId\r\n        },\r\n        tblCategory: {\r\n          categoryId: categoryId\r\n\r\n        },\r\n        tblUser: {\r\n          userId: 1\r\n\r\n        },\r\n        newsAvatar: newsAvatar,\r\n        newsTitle: newsTitle,\r\n        newsPostDay: newsPostDay,\r\n        newsContent: newsContent\r\n      }\r\n      callAPI(`new/${id}`, 'PUT', newupdate).then(reps => {\r\n        if (reps.status === 201) {\r\n\r\n          alert('Them thanh cong');\r\n\r\n        }\r\n        var { history } = this.props;\r\n        setTimeout(function () { history.push(\"/manager/news\"); }, 2000);\r\n      });\r\n    } else {\r\n      var news = {\r\n        id: {\r\n\r\n          tblCategoriesId: categoryId\r\n        },\r\n        tblCategory: {\r\n          categoryId: categoryId\r\n\r\n        },\r\n        tblUser: {\r\n          userId: 1\r\n\r\n        },\r\n        newsAvatar: newsAvatar,\r\n        newsTitle: newsTitle,\r\n        newsPostDay: newsPostDay,\r\n        newsContent: newsContent\r\n      }\r\n\r\n      this.props.addNews(news);\r\n      var { history } = this.props;\r\n      setTimeout(function () { history.push(\"/manager/news\"); }, 2000);\r\n    }\r\n\r\n  }\r\n  onClear = () => {\r\n    this.setState({\r\n      id: '',\r\n      categoryId: null,\r\n      userId: \"\",\r\n      newsAvatar: \"\",\r\n      newsTitle: '',\r\n      newsPostDay:'',\r\n      newsContent: '',\r\n      slt: 0\r\n\r\n    });\r\n  }\r\n  render() {\r\n    var { category } = this.props\r\n    //console.log(category)\r\n    var elem = category.map((n, index) => {\r\n      return (<option \r\n        key={index}\r\n        value={n.categoryId}>{n.categoryTitle}</option>\r\n      )\r\n    });\r\n    var { userEmail, categoryId, newsAvatar, newsPostDay, newsContent, newsTitle, slt } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-12\">\r\n            <div className=\"card\">\r\n              <div className=\"card-header\">\r\n                <label className=\"col-form-label\">Sửa tin tức</label>\r\n              </div>\r\n              <div className=\"card-body card-block\">\r\n                <form onSubmit={this.onSubmit} className=\"form-horizontal\">\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"text-input\" className=\" form-control-label\">Tiêu đề bài viết</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <input type=\"text\" \r\n                        name=\"newsTitle\"\r\n                        placeholder=\"Tên tiêu đề\"\r\n                        className=\"form-control\"\r\n                        onChange={this.onChange}\r\n                        value={newsTitle} />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"text-input\" className=\" form-control-label\">Chuyên mục</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <select name=\"categoryId\"\r\n                        className=\"form-control\"\r\n                        onChange={this.onChange}\r\n                        value={categoryId}\r\n                      >\r\n                        {elem}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"file-input\" className=\" form-control-label\">File ảnh</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <input type=\"file\" id=\"file-input\" name=\"newsAvatar\" className=\"form-control-file\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"file-input\" className=\" form-control-label\">Nội dung</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <div className=\"form-group\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-md-12\">\r\n                            <textarea className=\"ckeditor\"\r\n                              name=\"newsContent\"\r\n                              onChange={this.onChange}\r\n                              value={newsContent}\r\n                              rows=\"5\" cols=\"70\" />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"file-input\" className=\" form-control-label\">Người đăng</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <input type=\"text\"\r\n                        name=\"userId\"\r\n                        placeholder=\" người tạo\"\r\n                        className=\"form-control\"\r\n                        onChange={this.onChange}\r\n                        value={userEmail} />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row form-group\">\r\n                    <div className=\"col col-md-3\">\r\n                      <label htmlFor=\"file-input\" className=\" form-control-label\">Ngày tạo</label>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-9\">\r\n                      <input type=\"date\"\r\n                        name=\"newsPostDay\"\r\n                        className=\"form-control\"\r\n                        onChange={this.onChange}\r\n                        value={newsPostDay} />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"card-footer\">\r\n                    <button type=\"submit\" className=\"btn btn-primary btn-sm\">\r\n                      <i className=\"fa fa-dot-circle-o\" /> Luu\r\n              </button>\r\n                    <button type=\"button\" className=\"btn btn-danger btn-sm\" onClick={this.onClear}>\r\n                      <i className=\"fa fa-ban\" /> Reset\r\n              </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    category: state.Category\r\n  }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispath, props) => {\r\n  return {\r\n    getCategory: () => {\r\n\r\n      dispath(saveCategoryRequest());\r\n    },\r\n    addNews: (news) => {\r\n\r\n      dispath(addNewsRequest(news));\r\n    }\r\n\r\n  }\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(createNew)"]},"metadata":{},"sourceType":"module"}